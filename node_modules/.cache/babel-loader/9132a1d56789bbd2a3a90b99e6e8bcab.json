{"ast":null,"code":"var _jsxFileName = \"/Users/vladikumpan/draw-guess/src/components/Pages/Welcome/Welcome.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Welcome = props => {\n  _s();\n\n  const [status, setStatus] = useState(\"\");\n  const [time, setTime] = useState(0);\n  const channel = new BroadcastChannel(\"timer_sync\");\n  const startTimer = useCallback(delay => {\n    setTimeout(() => {\n      setInterval(() => {\n        setTime(time => time + 1);\n      }, 1000);\n    }, delay);\n  }, []);\n\n  const syncItUp = () => {\n    const timeNow = new Date().getTime();\n    channel.postMessage(timeNow);\n    setStatus(`Sent \"sync\" message`);\n    startTimer(2000);\n  };\n\n  useEffect(() => {\n    channel.onmessage = ev => {\n      console.log(ev);\n      const timeNow = new Date().getTime();\n      setStatus(`Received \"sync\" message`);\n      startTimer(2000 - (timeNow - ev.data));\n    };\n\n    return () => {\n      channel.close();\n    };\n  }, [channel, startTimer]);\n\n  const startClickHandler = () => {\n    props.handler();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Welcome to our Draw And Guess game!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: syncItUp,\n      children: \"Click to start\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), status && time === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer\",\n      children: \"Starting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 31\n    }, this) : null, time > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer\",\n      children: time\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 19\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Welcome, \"04SAWc8cZd7zxMKh39+jabZV1Ug=\");\n\n_c = Welcome;\nexport default Welcome;\n\nvar _c;\n\n$RefreshReg$(_c, \"Welcome\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useNavigate","Welcome","props","status","setStatus","time","setTime","channel","BroadcastChannel","startTimer","delay","setTimeout","setInterval","syncItUp","timeNow","Date","getTime","postMessage","onmessage","ev","console","log","data","close","startClickHandler","handler"],"sources":["/Users/vladikumpan/draw-guess/src/components/Pages/Welcome/Welcome.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Welcome = (props) => {\n\n  const [status, setStatus] = useState(\"\");\n  const [time, setTime] = useState(0);\n  const channel = new BroadcastChannel(\"timer_sync\");\n\n  const startTimer = useCallback(delay => {\n    setTimeout(() => {\n      setInterval(() => {\n        setTime(time => time + 1);\n      }, 1000);\n    }, delay);\n  }, []);\n\n  const syncItUp = () => {\n    const timeNow = new Date().getTime();\n    channel.postMessage(timeNow);\n    setStatus(`Sent \"sync\" message`);\n    startTimer(2000);\n  };\n\n  useEffect(() => {\n    channel.onmessage = ev => {\n      console.log(ev);\n      const timeNow = new Date().getTime();\n      setStatus(`Received \"sync\" message`);\n      startTimer(2000 - (timeNow - ev.data));\n    };\n\n    return () => {\n      channel.close();\n    };\n  }, [channel, startTimer]);\n\n    \n\n  const startClickHandler =()=>{\n    props.handler();\n  };\n\n  return (\n    <div>\n      <h1>Welcome to our Draw And Guess game!</h1>\n      <button onClick={syncItUp}>Click to start</button>\n      <div>{status}</div>\n      {status && time === 0 ? <div className=\"timer\">Starting...</div> : null}\n      {time > 0 ? <div className=\"timer\">{time}</div> : null}\n    </div>\n  );\n};\n\nexport default Welcome;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,WAArC,QAAwD,OAAxD;AACA,SAASC,WAAT,QAA4B,kBAA5B;;;AAEA,MAAMC,OAAO,GAAIC,KAAD,IAAW;EAAA;;EAEzB,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC,EAAD,CAApC;EACA,MAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,CAAD,CAAhC;EACA,MAAMS,OAAO,GAAG,IAAIC,gBAAJ,CAAqB,YAArB,CAAhB;EAEA,MAAMC,UAAU,GAAGV,WAAW,CAACW,KAAK,IAAI;IACtCC,UAAU,CAAC,MAAM;MACfC,WAAW,CAAC,MAAM;QAChBN,OAAO,CAACD,IAAI,IAAIA,IAAI,GAAG,CAAhB,CAAP;MACD,CAFU,EAER,IAFQ,CAAX;IAGD,CAJS,EAIPK,KAJO,CAAV;EAKD,CAN6B,EAM3B,EAN2B,CAA9B;;EAQA,MAAMG,QAAQ,GAAG,MAAM;IACrB,MAAMC,OAAO,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAhB;IACAT,OAAO,CAACU,WAAR,CAAoBH,OAApB;IACAV,SAAS,CAAE,qBAAF,CAAT;IACAK,UAAU,CAAC,IAAD,CAAV;EACD,CALD;;EAOAZ,SAAS,CAAC,MAAM;IACdU,OAAO,CAACW,SAAR,GAAoBC,EAAE,IAAI;MACxBC,OAAO,CAACC,GAAR,CAAYF,EAAZ;MACA,MAAML,OAAO,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAhB;MACAZ,SAAS,CAAE,yBAAF,CAAT;MACAK,UAAU,CAAC,QAAQK,OAAO,GAAGK,EAAE,CAACG,IAArB,CAAD,CAAV;IACD,CALD;;IAOA,OAAO,MAAM;MACXf,OAAO,CAACgB,KAAR;IACD,CAFD;EAGD,CAXQ,EAWN,CAAChB,OAAD,EAAUE,UAAV,CAXM,CAAT;;EAeA,MAAMe,iBAAiB,GAAE,MAAI;IAC3BtB,KAAK,CAACuB,OAAN;EACD,CAFD;;EAIA,oBACE;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAQ,OAAO,EAAEZ,QAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAGE;MAAA,UAAMV;IAAN;MAAA;MAAA;MAAA;IAAA,QAHF,EAIGA,MAAM,IAAIE,IAAI,KAAK,CAAnB,gBAAuB;MAAK,SAAS,EAAC,OAAf;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAvB,GAAkE,IAJrE,EAKGA,IAAI,GAAG,CAAP,gBAAW;MAAK,SAAS,EAAC,OAAf;MAAA,UAAwBA;IAAxB;MAAA;MAAA;MAAA;IAAA,QAAX,GAAiD,IALpD;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AASD,CAjDD;;GAAMJ,O;;KAAAA,O;AAmDN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}